<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>leaflet Sample</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.3/semantic.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.3/semantic.min.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>
</head>

<body>
<div class="ui container">
  <div id="mapid" class="ui embed stackable" style="height: 80%; width:100%; margin: 0; overflow: hidden;" ></div>
</div>
<script>
var x = {
  "type": "FeatureCollection", "crs": {"type": "name", "properties": {"name": "urn:ogc:def:crs:OGC:1.3:CRS84"}},
  "features": [
    {"type": "Feature", "geometry": {"type": "Point", "coordinates": [119.1594, 34.5997]}},
    {"type": "Feature", "geometry": {"type": "Point", "coordinates": [-121.816, 37.3698]}},
    {"type": "Feature", "geometry": {"type": "Point", "coordinates": [
      (Math.random() - 0.5) * 170, (Math.random() - 0.5) * 80
    ]}},
    {"type": "Feature", "geometry": {"type": "Point", "coordinates": [
      (Math.random() - 0.5) * 170, (Math.random() - 0.5) * 80
    ]}},
    {"type": "Feature", "geometry": {"type": "Point", "coordinates": [
      (Math.random() - 0.5) * 170, (Math.random() - 0.5) * 80
    ]}},
    {"type": "Feature", "geometry": {"type": "Point", "coordinates": [
      (Math.random() - 0.5) * 170, (Math.random() - 0.5) * 80
    ]}},
    {"type": "Feature", "geometry": {"type": "Point", "coordinates": [
      (Math.random() - 0.5) * 170, (Math.random() - 0.5) * 80
    ]}},
    {"type": "Feature", "geometry": {"type": "Point", "coordinates": [
      (Math.random() - 0.5) * 170, (Math.random() - 0.5) * 80
    ]}},
    {"type": "Feature", "geometry": {"type": "Point", "coordinates": [
      (Math.random() - 0.5) * 170, (Math.random() - 0.5) * 80
    ]}},
    {"type": "Feature", "geometry": {"type": "Point", "coordinates": [
      (Math.random() - 0.5) * 170, (Math.random() - 0.5) * 80
    ]}},
  ]
};
  

  
var map = L.map('mapid').setView([0, 0], 2);
L.tileLayer(
'https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png',
{
    attribution: "<a href='https://www.gsi.go.jp/kikakuchousei/kikakuchousei40182.html' target='_blank'>国土地理院</a>"
}
).addTo(map);
var l = new L.LayerGroup();
var layer = L.geoJSON(x, {
    onEachFeature: function (f, l) {
      l.bindPopup('<pre></pre>');
    }
}).addTo(l);
l.addTo(map)
  
jQuery(function($){
  setInterval(
    function(){
      $.ajax({url:'akemihomura.localtunnel.me', type:'GET'}).done( (data) => {
        console.log(data);
        L.geoJSON(data).addTo(l);
      });
    }, 10000
  )();  
});

</script>
</body>
</html>
